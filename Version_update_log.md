# 更新日志

- 2022-10-27: **V1.82**:
  - 新增：上传页面默的认图床切换列表现在会使用不同的颜色来区分当前的默认图床。
  - 优化：弹出框统一为Cupertino样式。
  - 优化: 网络图片预览加入了加载中和加载失败的状态管理。
  - 优化：重命名了大部分代码文件和部分变量名，使其符合dart命名规范。
  - 优化：解决了绝大部分代码格式不规范问题，共计约450处。
  - 优化：优化了代码结构，提取出了一些公共方法，精简了代码量，共减少约2000行代码。
  - 修复：清空相册数据库页面，弹出框点击确认后，弹出框不会消失的问题。
- 2022-10-25: **V1.81**:
  
  - 新增：图床仓库管理功能增加了对**SM.MS**的支持
  - 新增：图床管理主页卡片现在可以拖动排序了，拖动后会自动保存顺序。
  - 优化: 文件全部删除后显示空目录提示背景，而不是空白。
  - 优化: 调整了部分界面里浮动按钮的位置和大小。
  - 修复：网络不佳的情况下，提前退出页面后，请求回调setState报错。
  - 修复: 如果在本地文件浏览目录里删除了已下载的文件，返回下载页面后删除下载任务会报错的问题。
  - 修复: 本地下载文件目录浏览页面里，右滑删除按钮点击无效的问题。
  - 修复: 图床文件浏览页面中，删除文件的时候，选中列表对应元素没有被同步移除的bug。
- 2022-10-24: **V1.80**:

  - 增加了新的功能**图床仓库管理**，目前实现了对**腾讯云COS**的支持（*相当于内置了一个精简版的腾讯COSBrowser*)，后续会陆续增加对其他图床的支持，主要功能有：
      1. 查看存储桶列表，支持创建和删除，修改访问权限，设置存储桶为腾讯云COS的默认存储桶。
      2. 查看存储桶中的目录和文件列表，目录和文件都支持右滑删除，文件额外支持右滑分享连接。可新建文件夹，可设置目录为图床仓库的默认目录，文件可复制多种格式的链接，重命名，照片可以预览。
      3. 存储桶管理页面和本地下载目录浏览页面均可按修改时间，文件名，文件大小，文件类型等排序。
      4. 支持多选上传文件和照片，上传剪贴板内的网络链接。
      5. 可批量下载和管理已下载文件，支持暂停和继续下载，支持删除已下载文件。
      6. 支持管理本地下载目录，可重命名和删除已下载文件，支持预览照片和调用其它应用打开文件。
  - 修改了本地相册数据库的存储路径
  - 从剪贴板链接获取网络图片时，加入了对空文本的处理
  - 修改了部分字体，部分弹出框修改为ios样式
  - UI细节优化
  - 修复了图床api在请求失败时的错误处理
- 2022-10-17: **V1.76**:
  - 重写了路由管理，优化了路由跳转的体验，修改了跳转动画。
  - 主页/相册/设置页面现在不会左上角出现返回按钮，更加美观。
  - 优化了主页在深色主题下的显示效果
- 2022-10-15: **V1.75**:
  - 增加了对阿里云OSS的支持
  - 增加了对又拍云存储的支持
  - 增加了导出图床配置到剪贴板的功能，导出格式为json
  - 增加了从剪贴板中的图片链接直接获取图片的功能，并且可以通过换行符分隔多个图片链接来一次性获取多张图片
  - 增加了上传的时候自定义文件名的功能，使用`{Y}`、`{y}`、`{m}`、`{d}`、`{uuid}`、`{md5}`等占位符，可选年月日，uuid，md5，随机字符串等任意组合来自定义文件名。
  - 增加了手动清除缓存的功能
- 2022-10-14: **V1.70**:
  - 增加了对腾讯云COS的支持
  - 修改自定义链接格式的占位符为`$fileName`和`$url`，来和PicGo保持一致，同时修改了默认的自定义链接格式。
  - 修复了七牛云不设置存储路径的时候保存路径错误的问题。
  - 修复了github，imgur和七牛云导入二维码配置的时候可选参数默认值错误和七牛云数据库保存的数据错误的问题。
- 2022-10-13: **V1.65**:
  - 增加了对七牛云的支持（吐槽一下，七牛云这官方文档真的是emmmm）
  - 调整了配置和图片上传/删除的时候的响应和连接超时时间设置数值。
  - 相册图片的外框默认透明色，选中的时候会有一个红色的边框提示。
- 2022-10-12: **V1.60**:
  - 增加了对Imgur图床的支持，但是由于Imgur的限制，使用的时候需要配置手机代理，在个人手机上配合clash测试可用。
  - 加入了设置配置和图片上传/删除的时候的响应和连接超时时间设置，防止网络不好的情况下卡死。
  - 区分了相册显示的时候的图片地址和复制的时候的图片地址，改善相册加载图片的速度，例如兰空图床在相册小图中显示的是缩略图，预览大图的时候才会加载原图。
  - 修复了设置页面跳转到主页的时候，有时会先跳转到相册页面的问题
  - 修复了注册用户的时候，同步创建本地相册数据库的代码没有执行的bug
  - 修复了连续上传功能中，复制的链接的格式错误的bug
  - 更改了登录页面UI，方便区分出是否已经登录
- 2022-10-11: **V1.55**:
  - 增加了扫码导入PicGo配置的功能，和PicGo进一步兼容。
  - 增加了对github图床的支持,在主页增加了切换默认上传图床的浮动按钮。
  - 增加了自定义复制链接的格式的功能，和PicGo的自定义格式一样，使用\${url}和\${filename}来表示链接和文件名，可以在设置中自定义。
  - 增加了新的设置选项，可以选择在删除图片的时候是否同步删除网络端的图片（默认不删除）。
  - 重新整理了源代码文件架构，使得代码更加清晰，方便后续的更新和维护。
  - 修复了相册上翻页功能没有按预期作用的问题。
  - 修复了图片多选的时候，删除功能的bug，同时优化了动画显示，现在不会傻傻的等待了。
  - 修复了相册中显示的图床和默认上传图床不一致的时候无法删除网络端图片的bug。
  - 修复了选中状态会在翻页的时候保留的bug。
  - 修复了设置默认上传图床参数的时候，没有同步更改云端数据库记录的问题。
  - 优化了界面UI，修复了一些组件尺寸的问题。
- 2022-10-09: **V1.50**:
  - 增加了**相册**功能，进一步对标了PicGo,现在PicHoro不仅是一款上传工具，也是一款图床管理工具。
  - 相册模块中实现了这些功能：
    1. 显示已经上传的图片，分页显示，每页12张，可以上划和下拉翻页。
    2. 分图床显示，可选择显示某个图床的图片。
    3. 实现了删除图片的功能，删除后会自动刷新相册，默认删除数据库记录和图床上的图片，可选择是否同步删除本地图片。
    4. 实现了多选功能，可选择多张图片进行删除和复制指定格式的链接。
    5. 可点击图片查看大图，双击图片可复制指定格式的链接，长按图片可弹出菜单，选择链接格式或者删除图片。
    6. 相册中的图片数据保存在本地，通过APP内升级时不会丢失。
  - 增加了选择默认图床的页面，可以更直观的知道当前默认图床是哪个。
  - 修复了一些已知的bug。
- 2022-10-07: **V1.41**:
  - 增加了对SM.MS图床的支持
  - 修复了markdown链接的文件名错误的问题
- 2022-10-07: **V1.40**:

  - 增加了文件上传自动重命名的功能
  - 增加了文件上传后自动复制链接的功能，同时可选url，html，markdown，bbcode和带链接的markdown等格式
  - 增加了软件APP内自动更新的功能
  - Github国内打开太慢，把项目地址页面换成更新日志页面
  - 部分bug修复
- 2022-10-06: **V1.31**:

  - 修复了已注册用户在新设备第一次登录的时候，无法正常登录的bug
  - 修复了连续上传功能在退出的时候会卡在上传中的bug
  - 已登录的设备在获取云端配置的时候不需要重新输入用户名和密码了
  - 修复了部分代码小bug
- 2002-10-05: **V1.30**:

  - 重构了整个APP的代码架构，把所有的页面和功能性函数都放在了对应文件夹里，方便后续的维护和扩展，同时抽象了上传等功能的接口，后续增加图床时可以直接调用。
  - 增加了用户登录和拉取云端配置的功能，可以通过用户名和密码登录，将图床配置等保存在服务器上，这里现在用户本地用3DES加密然后再保存到数据库，除了用户名和图床名是明文外，其他的都是密文，这样可以保证用户的隐私。
  - 增加了软件主题切换的功能，增加了软件更新页面
  - 新设计了软件的图标和启动画面，同时对软件的UI进行了一些优化
  - 一些BUG修复
- 2002-10-04: **V1.21**:

  - 增加了上传图片和配置图床时的等待动画
  - 在设置页面增加了底部导航栏，修改了部分按钮的名字
  - 调整了部分弹出式提示框的实现方式，修改为自动消失的小提示框，同时部分重要提示框禁止了点击背景消失
  - 修复了项目地址页面打不开的问题
  - 优化了部分代码
- 2002-10-03: **V1.20**:

  - 现在从相册里选择照片的时候可以多选了，上传功能也更新为批量上传
  - 增加了新的设置页面，可以在设置页面里选择图床配制，项目地址和联系作者
  - 重构了部分代码，为后续增加图床平台做准备
  - 优化了页面布局，改变了部分UI
- 2002-10-03: **V1.10**:

  - 增加了对权限的主动获取，避免用户手动授予权限
  - 增加了对拍照后自动上传并返回拍照界面的功能
  - 增加了对各种异常的提醒
  - 优化了弹出框的显示布局
  - 优化了页面布局
- 2022-10-02: **V1.00**: 项目初始化，完成基本的上传功能，目前仅支持兰空图床，需要手动授予存储和相机权限
